<!-- Add / Edit Address Confirmation Modal -->
<div class="modal fade" id="addEditDependentModal" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="center-card dependent-card {{dependentAddressView ? 'extend' : ''}}">
      <div class="header-cap">
        <i class="fa fa-user-plus fa-5x"></i>
      </div>

      <div *ngIf="!dependentAddressView" class="header-content {{saveNotif?.show ? 'header-content-notif' : ''}}">

        <div class="col-md-12 m-t-10 add-address-div p-r-0 bg-fff">

          <div class="col-md-12 row p-0 m-t-10">
            
            <!-- 1st row -->
            <div class="col-md-12">
              <div class="input-effect-div input-effect m-t-10 m-b-10">
                <input type="text" class="labelled-effect text-cap {{name ? 'has-content' : '' }}" required="true" [(ngModel)]="name" (keyup)="enableSaveButton($event)"
                (focusout)="handleLabelName($event)" />
                <label>Name</label>
                <span class="focus-bg"></span>
                <i class="fa fa-user input-icon" aria-hidden="true"></i>
              </div>
            </div>
            
            <!-- 2nd row -->
            <div class="col-md-12">
              <div class="input-effect-div input-effect m-t-20 m-b-10 hide-fa-icon">
                <input type="date" name="dob" min="1900-01-01" max="{{today}}" class="labelled-effect has-content" (blur)="validateDOB()"
                [(ngModel)]="dob" />
                <label>D.O.B.</label>
                <span class="focus-bg"></span>
                <i class="fa fa-calendar fa-lg input-icon" aria-hidden="true"></i>
              </div>
            </div>
            <div class="col-md-12">
              <div class="input-effect-div input-effect col-md-6 m-b-10">
                <input type="radio" value="Male" name="sex" [(ngModel)]="sex" (change)="enableSaveButton()" [checked]="sex === 'Male' ? 'true' : false"/>
                <label class="m-r-5">Male</label>
                <input type="radio" value="Female" name="sex" [(ngModel)]="sex" (change)="enableSaveButton()" [checked]="sex === 'Female' ? 'true' : false"/>
                <label class="m-r-5">Female</label>
              </div>
            </div>
            
            <!-- 3rd row -->
            <div class="col-md-12">
              <div class="input-effect-div input-effect m-t-10 m-b-10">
                <select class="labelled-effect {{relation ? 'has-content' : '' }}" [(ngModel)]="relation" (change)="enableSaveButton($event)">
                  <option *ngFor="let relation of relationshipList">{{relation}}</option>
                </select>
                <label>Relationship</label>
                <span class="focus-bg"></span>
                <i class="fa fa-link input-icon" aria-hidden="true"></i>
              </div>
            </div>
            
            <!-- 4th row -->
            <div class="col-md-12">
              <div class="m-b-10">
                <i class="fa fa-plus fa-2x pull-left col-i2h cur-p" aria-hidden="true"></i>
                <label class="link" style="vertical-align: sub;" (click)="showAddressDiv()">
                  Add / Change Address
                </label>
                <i title="Find in map" class="fa fa-map-marker fa-2x pull-right {{ false ? 'col-i2h cur-p' : 'cur-disabled'}}" aria-hidden="true" (click)="showMap()"></i>
              </div>
              <div *ngIf="defaultAddress" class="col-md-12 row bg-alt">
                
                <div class="text-center pull-left address-tag default" attr.addid="{{defaultAddress.id}}" >{{defaultAddress.tag}}</div>
                  
                <div class="col-md-12" title="{{defaultAddress.name}}">
                  <i class="fa fa-id-card-o fa-lg added-address-icon" aria-hidden="true"></i>
                  <label class="text-trim col-md-11 pull-left text-cap">{{defaultAddress.name}}</label>
                </div>
                
                <div class="col-md-12" title="{{defaultAddress.altContact ? (defaultAddress.contact + ', ' + defaultAddress.altContact) : defaultAddress.contact}}">
                  <i class="fa fa-mobile fa-lg added-address-icon" aria-hidden="true"></i>
                  <label class="text-trim col-md-11 pull-left text-cap">{{defaultAddress.altContact ? (defaultAddress.contact + ', ' + defaultAddress.altContact) : defaultAddress.contact}}</label>
                </div>
                
                <div class="col-md-12" title="{{defaultAddress.address}}{{defaultAddress.landmark ? ', ' + defaultAddress.landmark : ''}}{{', ' + defaultAddress.locality}}">
                  <i class="fa fa-home fa-lg added-address-icon" aria-hidden="true"></i>
                  <label class="text-trim col-md-11 text-cap">
                    {{defaultAddress.address}}{{defaultAddress.landmark ? ', ' + defaultAddress.landmark : ''}}{{', ' + defaultAddress.locality}}
                  </label>
                </div>
                
                <div class="col-md-12" title="{{defaultAddress.city + ', ' + defaultAddress.state + ' - ' + defaultAddress.pincode}}">
                  <i class="fa fa-map-marker fa-lg added-address-icon" aria-hidden="true"></i>
                  <label class=" col-md-11 text-cap">{{defaultAddress.city + ', ' + defaultAddress.state + ' - ' + defaultAddress.pincode}}</label>
                </div>

              </div>
            </div>

          </div>
        </div>


        <div class="col-md-12 p-0 m-t-20 text-center">
          <!-- <span class="sub-info">
            <i class="fa fa-asterisk mandatory-icon" aria-hidden="true"></i>
            denotes mandatory fields
          </span> -->

          <button type="button" class="cancel m-r-20 btn btn-i2h" data-dismiss="modal" (click)="closeAddEditModal()">Cancel</button>

          <button type="submit" title="Add new address" class=" m-l-20 btn btn-form btn-i2h" disabled="{{enableSaveBtn ? null : 'true' }}"
            (click)="enableSaveBtn ? addUpdateDependent() : null">
            Save Address
            <i *ngIf="addProgress" class="fa fa-spinner fa-spin inline-loader col-fff"></i>
          </button>

        </div>

        <div id="notification-block" class="col-md-12 p-0 m-t-10">
          <div *ngIf="saveNotif?.show" role="alert" class="text-center alert {{saveNotif.classCss}} alert-fade-in alert-dismissible">
            <button type="button" class="close" aria-label="Close" (click)="closeSaveNotif()">
              <span aria-hidden="true">&times;</span>
            </button>
            <i class="fa fa-info-circle"></i> &nbsp; {{saveNotif?.message}}
          </div>
        </div>

      </div>

      <div *ngIf="dependentAddressView" class="header-content">
        <app-address [isDependentView]="dependentAddressView" (defaultAddressChange)="onPassedDefaultAddress($event)"
        (backToDependentViewChange)="onBackToDependentView($event)"></app-address>
      </div>

    </div>
  </div>
</div>

